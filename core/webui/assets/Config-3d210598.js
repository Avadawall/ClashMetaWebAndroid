import{i as e,c as a,t as f,a8 as C,a6 as te,k as B,N as le,F as T,S as R,W as oe,R as de,p as ue,P as ge,b as o,D as P,T as pe,a7 as ae,v as he}from"./vendor-5f1229f9.js";import{u as I,d as k,a7 as fe,B as w,a8 as ve,a9 as m,aa as be,ab as me,ac as xe,ad as _e,ae as $e,af as Ce,ag as ke,ah as ye,ai as Se,aj as we,b as De,ak as Ee,al as L,am as K,an as Te,ao as Y,ap as Ne,aq as ee,ar as Pe,as as Ie,at as Ae,au as Le,av as Fe,a6 as Be,aw as Re,ax as je,ay as Oe,az as Qe}from"./index-d4aad9d6.js";const Ve=f('<div class="flex flex-col p-4">'),Ge=f('<div class="flex flex-col"><form class="flex gap-2 sm:flex-row"><input type="search" name="name" class="input input-bordered min-w-0 flex-1" placeholder="google.com"><div class="flex items-center gap-2"><select name="type" class="select select-bordered"><option>A</option><option>AAAA</option><option>MX'),Me=f('<div class="py-2">'),Ue=f('<div class="flex flex-col gap-4"><select class="select select-bordered"><option></option><option></option><option></option></select><form class="grid grid-cols-3 gap-2 sm:grid-cols-5"></form><div class="grid grid-cols-2 gap-2 sm:grid-cols-4"><div class="form-control"><label for="enable-tun-device" class="label gap-2"><span class="label-text"></span></label><input id="enable-tun-device" type="checkbox" class="toggle"></div><div class="form-control"><label for="tun-ip-stack" class="label gap-2"><span class="label-text"></span></label><select id="tun-ip-stack" class="select select-bordered flex-1"><option>gVisor</option><option>System</option><option>LWIP</option></select></div><div class="form-control"><label for="device-name" class="label gap-2"><span class="label-text"></span></label><input id="device-name" class="input input-bordered min-w-0"></div><div class="form-control"><label for="interface-name" class="label gap-2"><span class="label-text"></span></label><input id="interface-name" class="input input-bordered min-w-0"></div></div><div class="grid grid-cols-2 gap-2 sm:grid-cols-3">'),qe=f('<div class="form-control"><label class="label"><span class="label-text"></span></label><input type="number" class="input input-bordered">'),ze=f('<div class="flex flex-col gap-2"><div class="flex flex-col"><select class="select select-bordered"></select></div><div class="flex flex-col"><select class="select select-bordered">'),He=f('<div class="grid grid-cols-1 gap-4 sm:grid-cols-2"><div class="flex flex-col gap-2"><div class="flex flex-col items-center"><input type="checkbox" class="toggle"></div></div><div class="flex flex-col gap-2"><div class="flex flex-col items-center"><input type="checkbox" class="toggle"></div><div class="flex flex-col"><select class="select select-bordered">'),F=f("<option>"),We=f('<span class="absolute -right-1 -top-1 flex h-3 w-3"><span class="absolute inline-flex h-full w-full animate-ping rounded-full bg-info opacity-75"></span><span class="inline-flex h-3 w-3 rounded-full bg-info">'),Xe=f('<div class="flex flex-col gap-2"><div class="grid grid-cols-2 gap-4"><kbd class="kbd"></kbd><div class="relative"><kbd class="kbd w-full"></kbd></div></div><h1 class="text-center text-lg font-bold">'),Ze=f('<div class="mx-auto flex max-w-screen-md flex-col gap-4">'),Je=C.object({name:C.string(),type:C.string()}),Ke=()=>{const[t]=I(),c=fe(),{form:x,isSubmitting:v}=te({extend:ae({schema:Je}),onSubmit:i=>c.get("dns/query",{searchParams:{name:i.name,type:i.type}}).json().then(({Answer:n})=>b((n==null?void 0:n.map(({data:s})=>s))||[])).catch(n=>he.error(n.message))}),[u,b]=B([]);return(()=>{const i=Ge(),n=i.firstChild,s=n.firstChild,p=s.nextSibling;return p.firstChild,le(x,n,()=>x),e(p,a(w,{type:"submit",class:"btn-primary",get loading(){return v()},get children(){return t("dnsQuery")}}),null),e(i,a(R,{get when(){return u().length>0},get children(){const g=Ve();return e(g,a(T,{get each(){return u()},children:r=>(()=>{const d=Me();return e(d,r),d})()})),g}}),null),i})()},Ye=C.object({port:C.number(),"socks-port":C.number(),"redir-port":C.number(),"tproxy-port":C.number(),"mixed-port":C.number()}),et=()=>{const[t]=I(),c=oe(),x=[{label:()=>t("port",{name:"HTTP"}),key:"port",onChange:s=>void m("port",Number(s.target.value),n)},{label:()=>t("port",{name:"Socks"}),key:"socks-port",onChange:s=>void m("socks-port",Number(s.target.value),n)},{label:()=>t("port",{name:"Redir"}),key:"redir-port",onChange:s=>void m("redir-port",Number(s.target.value),n)},{label:()=>t("port",{name:"TProxy"}),key:"tproxy-port",onChange:s=>void m("tproxy-port",Number(s.target.value),n)},{label:()=>t("port",{name:"Mixed"}),key:"mixed-port",onChange:s=>void m("mixed-port",Number(s.target.value),n)}],{form:v,setInitialValues:u,reset:b}=te({extend:ae({schema:Ye})}),[i,{refetch:n}]=de(ve);return ue(()=>{const s=i();s&&(u(s),b())}),(()=>{const s=Ue(),p=s.firstChild,g=p.firstChild,r=g.nextSibling,d=r.nextSibling,y=p.nextSibling,E=y.nextSibling,S=E.firstChild,h=S.firstChild,_=h.firstChild,j=h.nextSibling,O=S.nextSibling,Q=O.firstChild,ne=Q.firstChild,V=Q.nextSibling,G=O.nextSibling,M=G.firstChild,se=M.firstChild,U=M.nextSibling,ie=G.nextSibling,q=ie.firstChild,re=q.firstChild,z=q.nextSibling,D=E.nextSibling;return p.addEventListener("change",l=>void m("mode",l.target.value,n)),e(g,()=>t("global")),e(r,()=>t("rule")),e(d,()=>t("direct")),le(v,y,()=>v),e(y,a(T,{each:x,children:l=>(()=>{const H=qe(),A=H.firstChild,ce=A.firstChild,N=A.nextSibling;return e(ce,()=>l.label()),ge(N,"change",l.onChange),o($=>{const W=l.key,X=l.key,Z=l.key,J=l.label();return W!==$._v$&&P(A,"for",$._v$=W),X!==$._v$2&&P(N,"id",$._v$2=X),Z!==$._v$3&&P(N,"name",$._v$3=Z),J!==$._v$4&&P(N,"placeholder",$._v$4=J),$},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),H})()})),e(_,()=>t("enableTunDevice")),j.addEventListener("change",l=>void m("tun",{enable:l.target.checked},n)),e(ne,()=>t("tunModeStack")),V.addEventListener("change",l=>void m("tun",{stack:l.target.value},n)),e(se,()=>t("tunDeviceName")),U.addEventListener("change",l=>void m("tun",{device:l.target.value},n)),e(re,()=>t("interfaceName")),z.addEventListener("change",l=>void m("interface-name",l.target.value,n)),e(D,a(w,{class:"btn-primary",get loading(){return be()},onClick:me,get children(){return t("reloadConfig")}}),null),e(D,a(w,{class:"btn-secondary",get loading(){return xe()},onClick:_e,get children(){return t("updateGEODatabases")}}),null),e(D,a(w,{class:"btn-accent",get loading(){return $e()},onClick:Ce,get children(){return t("flushFakeIP")}}),null),e(D,a(w,{class:"btn-error",get loading(){return ke()},onClick:ye,get children(){return t("upgradeCore")}}),null),e(D,a(w,{class:"btn-warning",get loading(){return Se()},onClick:we,get children(){return t("restartCore")}}),null),e(D,a(w,{class:"btn-info",onClick:()=>{De(""),c(Ee.Setup)},get children(){return t("switchEndpoint")}}),null),o(()=>{var l;return p.value=(l=i())==null?void 0:l.mode}),o(()=>g.value=L.Global),o(()=>r.value=L.Rule),o(()=>d.value=L.Direct),o(()=>{var l;return j.checked=(l=i())==null?void 0:l.tun.enable}),o(()=>{var l;return V.value=(l=i())==null?void 0:l.tun.stack}),o(()=>{var l;return U.value=(l=i())==null?void 0:l.tun.device}),o(()=>{var l;return z.value=(l=i())==null?void 0:l["interface-name"]}),s})()},tt=()=>{const[t]=I(),c=[{label:()=>t("en"),value:K.EN},{label:()=>t("zh"),value:K.ZH}];return(()=>{const x=He(),v=x.firstChild,u=v.firstChild,b=u.firstChild,i=v.nextSibling,n=i.firstChild,s=n.firstChild,p=n.nextSibling,g=p.firstChild;return e(u,a(k,{get children(){return t("autoSwitchTheme")}}),b),b.addEventListener("change",r=>Te(r.target.checked)),e(v,a(R,{get when(){return Y()},get children(){const r=ze(),d=r.firstChild,y=d.firstChild,E=d.nextSibling,S=E.firstChild;return e(d,a(k,{get children(){return t("favDayTheme")}}),y),y.addEventListener("change",h=>Ne(h.target.value)),e(y,a(T,{each:ee,children:h=>(()=>{const _=F();return _.value=h,e(_,h),_})()})),e(E,a(k,{get children(){return t("favNightTheme")}}),S),S.addEventListener("change",h=>Pe(h.target.value)),e(S,a(T,{each:ee,children:h=>(()=>{const _=F();return _.value=h,e(_,h),_})()})),o(()=>y.value=Ie()),o(()=>S.value=Ae()),r}}),null),e(n,a(k,{get children(){return t("useTwemoji")}}),s),s.addEventListener("change",r=>Le(r.target.checked)),e(p,a(k,{get children(){return t("switchLanguage")}}),g),g.addEventListener("change",r=>Fe(r.target.value)),e(g,a(T,{each:c,children:r=>(()=>{const d=F();return e(d,()=>r.label()),o(()=>d.selected=Be()===r.value),o(()=>d.value=r.value),d})()})),o(()=>b.checked=Y()),o(()=>s.checked=Re()),x})()},lt=()=>{const[t,c]=B(""),[x,v]=B(!1);return pe(async()=>{const u=await je();c(u),v(await Oe(u))}),(()=>{const u=Xe(),b=u.firstChild,i=b.firstChild,n=i.nextSibling,s=n.firstChild,p=b.nextSibling;return e(i,()=>"1.124.0"),e(n,a(R,{get when(){return x()},get children(){return We()}}),s),e(s,t),e(p,()=>{var g;return(g=Qe())==null?void 0:g.url}),u})()},st=()=>{const[t]=I();return(()=>{const c=Ze();return e(c,a(k,{withDivider:!0,get children(){return t("dnsQuery")}}),null),e(c,a(Ke,{}),null),e(c,a(k,{withDivider:!0,get children(){return t("coreConfig")}}),null),e(c,a(et,{}),null),e(c,a(k,{withDivider:!0,get children(){return t("xdConfig")}}),null),e(c,a(tt,{}),null),e(c,a(k,{withDivider:!0,get children(){return t("version")}}),null),e(c,a(lt,{}),null),c})()};export{st as default};
